<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="../jquery.bootstrap-pureBattery.css">

<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<script type="text/javascript" src="../jquery.bootstrap-pureBattery.js"></script>

<style type="text/css">
	body {
		margin: 10px;
	}
	#sample > div {
		margin-left: 10px;
		margin-bottom: 15px;
	}
	
	.panel-body {
	 	padding: 0px;
	}
	
	.list-group {
		margin-bottom: 0px;
	}
	
	.list-group-item {
		border: 0px solid;
	} 
</style>

<title>pureBattery Example</title>
</head>
<body>
<div class="container">
	<div class="row">
		<div class="col-md-12">
			<div class="jumbotron">
				<h1>Pure Battery Example.</h1>
				<p>This is HTML5 Battery API.</p>
			</div>
		</div>
	</div> <!-- row -->
	<div class="row">
		<div id="sample" class="col-md-12">
			<div class="panel panel-success">
				<div class="panel-heading">
					<h3 class="panel-title">Settings.</h3>
				</div>
				<div class="panel-body">
					<ul class="list-group">
						<li class="list-group-item">
							<h4 class="list-group-item-heading">Default:</h4>
							<div class="list-group-item-text">
								<div id="pureBattery1"></div>
							</div>
						</li>
						<li class="list-group-item">
							<h4 class="list-group-item-heading">Custom Style. Width:100, Height:30:</h4>
							<div class="list-group-item-text">
								<div id="pureBattery2" style="width: 100px; height: 30px"></div>
							</div>
						</li>
						<li class="list-group-item">
							<h4 class="list-group-item-heading">Custom Object Option. Width:100, Height:30</h4>
							<div class="list-group-item-text">
								<div id="pureBattery3"></div>
							</div>
						</li>
					</ul>
				</div>			
			</div>
			
			<div class="panel panel-success">
				<div class="panel-heading">
					<h3 class="panel-title">'test' option</h3>
				</div>
				<div class="panel-body">
					<ul class="list-group">
						<li class="list-group-item">
							<h4 class="list-group-item-heading">Use 'test' Option. Auto not charging value:</h4>
							<div class="list-group-item-text">
								<div id="pureBattery4"></div>
							</div>
						</li>
						<li class="list-group-item">
							<h4 class="list-group-item-heading">Use 'test' Option. Auto charging value:</h4>
							<div class="list-group-item-text">
								<div id="pureBattery5"></div>
							</div>
						</li>
						<li class="list-group-item">
							<h4 class="list-group-item-heading">Use 'test' Option. Auto not charging value:</h4>
							<div class="list-group-item-text">
								<div id="pureBattery6"></div>
							</div>
						</li>
						<li class="list-group-item">
							<h4 class="list-group-item-heading">Use 'test' Option. Auto charging value:: </h4>
							<div class="list-group-item-text">
								<div id="pureBattery7"></div>
							</div>
						</li>
					</ul>				
				</div> <!-- panel-body -->
				<div class="panel-footer">
					<div class="row">
						<div class="col-md-4">
							<div class="input-group">
								<div class="input-group-addon">Width</div>
								<input type="number" class="form-control" id="customWidthValue" value="50" size="3">
								<span class="input-group-btn">
									<button type="button" id="customWidth" class="btn btn-info" role="btn">Change</button>
									<button type="button" id="defaultWidth" class="btn btn-default" role="btn">Default</button>
								</span>
							</div>						
						</div> <!-- column -->
						<div class="col-md-6">
							<div class="input-group">
								<div class="input-group-addon">Auto Change Battry Level</div>
								<button type="button" id="moveBtn" class="btn btn-success" role="btn">Stop</button>						
							</div>
						</div> <!-- column -->
					</div> <!-- row -->
				</div> <!-- panel-footer -->
			</div> <!-- panel -->
		</div> <!-- Column -->
	</div> <!-- row -->
</div> <!-- container -->

	<script type="text/javascript">
	$(document).ready(function(){
		$("#customWidthValue").on("change", function(){
			var width = $(this).val();
			changeWidth(width);
		})
		$("#customWidth").on("click", function(){
			var width = $("#customWidthValue").val();
			changeWidth(width);
		});
		$("#defaultWidth").on("click", function(){
			$("#customWidthValue").val(50).change();
		})
		var changeWidth = function(width){
			$("#pureBattery4").css({"width": width+"px"});
			$("#pureBattery5").css({"width": width+"px"});
			$("#pureBattery6").css({"width": width+"px"});
			$("#pureBattery7").css({"width": width+"px"});
		}
		
		var isStart = true;
		var procTest;
		var procRandom;
		
		$("#start").data("loading-text", "Started.");
		$("#stop").data("loading-text", "Stoped.");
		$("#start").button('loading');
		
		$("#moveBtn").on("click", function(){
			if(isStart){
				$(this).button("loading", "Stoping...").button('loading')
					.data("resetText", "Start");
				
				clearInterval(procTest);
				clearInterval(procRandom);
			}else{
				$(this).button("loading", "Starting...").button('loading')
					.data("resetText", "Stop");
				startProc();
			}
			
			$(this).button('reset');
			
			isStart = !isStart;
		});
		
		
		$("#pureBattery1").pureBattery();
		$("#pureBattery2").pureBattery();
		$("#pureBattery3").pureBattery({
			width: "100px",
			height: "30px"
		});
		$("#pureBattery4").pureBattery({test: true});
		$("#pureBattery5").pureBattery({test: true});
		$("#pureBattery6").pureBattery({test: true});
		$("#pureBattery7").pureBattery({test: true});
		
		var randomLevel = function(){
			$("#pureBattery4").pureBattery("test", "level", (Math.random() * 100) + 1);
			$("#pureBattery5").pureBattery("test", {"charging": true, "level": (Math.random() * 100) + 1});
		}
		
		var levelIndex1 = 100;
		var levelIndex2 = 0;
		var testLevel = function(){
			$("#pureBattery6").pureBattery("test", {"charging": false, "level": (levelIndex1--)});
			$("#pureBattery7").pureBattery("test", {"charging": true, "level": (levelIndex2++)});
			
			if(levelIndex1 < 0){
				levelIndex1 = 100;
			}
			if(levelIndex2 > 100){
				levelIndex2 = 0;
			}
		}
		
		var startProc = function(){
			procTest = setInterval(testLevel, 150);
			randomLevel();
			procRandom = setInterval(randomLevel, 3000);
		}
		
		setTimeout(startProc, 1000);
	});
</script>
</body>
</html>